// <auto-generated>
//     This code was generated by the BoundedContext Code Generator.
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>

using Inventorization.Commerce.DTO.Order;
using Inventorization.Base.Abstractions;

namespace Inventorization.Commerce.Domain.Validators;

/// <summary>
/// Validator for CreateOrderDTO
/// </summary>
public class CreateOrderValidator : IValidator<CreateOrderDTO>
{
    public async Task<ValidationResult> ValidateAsync(
        CreateOrderDTO dto,
        CancellationToken cancellationToken = default)
    {
        if (dto == null)
            return ValidationResult.WithErrors("DTO cannot be null");

        var errors = new List<string>();

        if (string.IsNullOrWhiteSpace(dto.OrderNumber))
    errors.Add("OrderNumber is required");

        if (!string.IsNullOrEmpty(dto.OrderNumber) && dto.OrderNumber.Length > 50)
    errors.Add("OrderNumber cannot exceed 50 characters");

        if (!string.IsNullOrEmpty(dto.OrderNumber) && !System.Text.RegularExpressions.Regex.IsMatch(dto.OrderNumber, @"^ORD-[0-9]{8}$"))
    errors.Add("OrderNumber format is invalid");

        if (dto.TotalAmount < 0)
    errors.Add("TotalAmount must be at least 0");


        return errors.Any()
            ? ValidationResult.WithErrors(errors.ToArray())
            : ValidationResult.Ok();
    }
}
