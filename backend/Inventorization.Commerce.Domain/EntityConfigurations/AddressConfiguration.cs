// <auto-generated>
//     This code was generated by the BoundedContext Code Generator.
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>

using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Metadata.Builders;
using Inventorization.Commerce.Domain.Entities;
using Inventorization.Commerce.Common.Enums;
using Inventorization.Base.DataAccess;

namespace Inventorization.Commerce.Domain.EntityConfigurations;

/// <summary>
/// Entity configuration for Address
/// </summary>
public class AddressConfiguration : BaseEntityConfiguration<Address>
{
    protected override void ConfigureEntity(EntityTypeBuilder<Address> builder)
    {
        builder.ToTable("Addresses");

        builder.Property(e => e.AddressType)
    .IsRequired()
    .HasDefaultValue(AddressType.Shipping)
    .HasConversion(new EnumerationConverter<AddressType>())
;

        builder.Property(e => e.Street)
    .IsRequired()
    .HasMaxLength(200)
;

        builder.Property(e => e.City)
    .IsRequired()
    .HasMaxLength(100)
;

        builder.Property(e => e.State)
    .IsRequired()
    .HasMaxLength(100)
;

        builder.Property(e => e.PostalCode)
    .IsRequired()
    .HasMaxLength(20)
;

        builder.Property(e => e.Country)
    .IsRequired()
    .HasMaxLength(100)
;

        builder.Property(e => e.IsDefault)
    .IsRequired()
    .HasDefaultValue(false)
;

        builder.HasIndex(e => e.CustomerId);

        builder.HasOne(e => e.Customer)
    .WithMany(p => p.Addresses)
    .HasForeignKey(e => e.CustomerId)
    .OnDelete(DeleteBehavior.Restrict);

    }
}
