// <auto-generated>
//     This code was generated by the BoundedContext Code Generator.
//     Generation Stamp: {{generationStamp}}
//     Generated: {{generatedAt}}
//     Source: {{sourceFile}}
//
//     Changes to this file will be lost when regenerated.
//     Custom business logic should be added to separate domain services.
// </auto-generated>

using {{baseNamespace}}.Base.DataAccess;
{{#if isOwned}}
using {{baseNamespace}}.Base.Abstractions;
using {{baseNamespace}}.Base.Ownership;
{{/if}}
using {{namespace}}.BL.Entities;

namespace {{namespace}}.BL.DataAccess;

/// <summary>
/// Converts SearchQuery ADT to IQueryable for {{entityName}} entity.
{{#if isOwned}}
/// Ownership-aware: extends BaseQueryBuilder&lt;{{entityName}}, {{ownershipValueObject}}&gt;.
/// Appends an ownership predicate derived from ICurrentIdentityContext&lt;{{ownershipValueObject}}&gt;.
{{else}}
/// Inherits all query building logic from BaseQueryBuilder.
{{/if}}
/// Uses default ParameterName (first letter of entity name in lowercase).
/// </summary>
{{#if isOwned}}
public class {{entityName}}QueryBuilder : BaseQueryBuilder<{{entityName}}, {{ownershipValueObject}}>
{
    public {{entityName}}QueryBuilder(ICurrentIdentityContext<{{ownershipValueObject}}> identityContext)
        : base(identityContext)
    {
    }

    // Override BuildOwnershipPredicate({{ownershipValueObject}} ownership) to customise visibility rules.
    // Default: exact-match on the Ownership VO (all fields must match).
}
{{else}}
public class {{entityName}}QueryBuilder : BaseQueryBuilder<{{entityName}}>
{
    // Empty body - uses all defaults from base class
    // Override ParameterName property if custom parameter name is needed
}
{{/if}}
