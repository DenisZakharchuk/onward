{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://inventorization.com/schemas/blueprint.schema.json",
  "title": "BoundedContext Blueprint",
  "description": "Architecture/layout blueprint for bounded context generation strategies",
  "type": "object",
  "required": ["version", "boundedContext"],
  "properties": {
    "version": {
      "type": "string",
      "enum": ["1"]
    },
    "boundedContext": {
      "type": "object",
      "required": ["presentation", "dataService"],
      "properties": {
        "common": {
          "type": "object",
          "properties": {
            "enums": {
              "type": "string",
              "enum": ["SmartEnums"]
            }
          },
          "additionalProperties": false
        },
        "presentation": {
          "type": "object",
          "required": ["kind"],
          "properties": {
            "kind": {
              "type": "string",
              "enum": ["controllers", "minimal-api", "grpc"]
            }
          },
          "additionalProperties": false
        },
        "dataService": {
          "type": "object",
          "required": ["dto", "uow", "dataAccess", "domain"],
          "properties": {
            "dto": {
              "type": "string",
              "enum": ["class", "record"]
            },
            "domain": {
              "type": "string",
              "enum": ["default"]
            },
            "uow": {
              "type": "string",
              "enum": ["injected"]
            },
            "dataAccess": {
              "type": "object",
              "properties": {
                "entities": {
                  "type": "string",
                  "enum": ["immutable"]
                },
                "orm": {
                  "type": "object",
                  "required": ["kind", "provider"],
                  "properties": {
                    "kind": {
                      "type": "string",
                      "enum": ["ef-core"]
                    },
                    "provider": {
                      "type": "string",
                      "enum": ["npgsql"]
                    }
                  },
                  "additionalProperties": false
                },
                "ado": {
                  "type": "object",
                  "required": ["provider"],
                  "properties": {
                    "provider": {
                      "type": "string",
                      "enum": ["npgsql"]
                    },
                    "dialect": {
                      "type": "string",
                      "enum": ["pgsql"]
                    }
                  },
                  "additionalProperties": false
                }
              },
              "oneOf": [
                {
                  "required": ["entities", "orm"],
                  "not": {
                    "required": ["ado"]
                  }
                },
                {
                  "required": ["entities", "ado"],
                  "not": {
                    "required": ["orm"]
                  }
                }
              ],
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false
}
